"use strict";(self.webpackChunkotpuskaet=self.webpackChunkotpuskaet||[]).push([[955],{89955:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var l=n(67294),o=n(13910),r=n(67177),a=n(61950),i=n(24404),s=n(73457),c=n(11023),m=n(28294),d=n(48389),u=n(12870),g=n(87792),E=n(7586),Z=n(67815),p=n(5709),f=n(77829),v=n(17485);const y=(0,l.createContext)({showShareScreen:()=>{}}),S=e=>l.createElement(y.Provider,{value:{...e.value}},e.children);(0,p.Bi)(y);var h=n(66063),F=n(90246),C=n(80037),b=n(11360),x=n(84758),T=n(61185),R=n(37279),w=n(41186),W=n(49892),B=n(71373),k=n(84620),I=n(97444),z=n(50939),L=n(820),M=n(85347),N=n(81563),P=n(90889),A=n(80634);const O=s.Z.create({logoContainerStyle:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},root:{flex:1},inputLabelStyle:{paddingLeft:8},main:{flexGrow:1,flexDirection:"row",justifyContent:"center"},heading:{fontSize:W.Z.FontSize.extraLarge,fontWeight:"700",lineHeight:W.Z.FontSize.extraLarge,color:"#FFFFFF",fontFamily:W.Z.FontFamily.sansPro,opacity:W.Z.EmphasisOpacity.high},headline:{fontSize:18,fontWeight:"400",textAlign:"center",color:"#FFFFFF",marginBottom:40},btnContainer:{width:"100%",alignItems:"center"},toggleContainer:{flexDirection:"row",backgroundColor:"#262626",paddingVertical:22,paddingHorizontal:20},upper:{borderTopLeftRadius:W.Z.BorderRadius.medium,borderTopRightRadius:W.Z.BorderRadius.medium},lower:{borderBottomLeftRadius:W.Z.BorderRadius.medium,borderBottomRightRadius:W.Z.BorderRadius.medium},toggleLabel:{color:"#FFFFFF",fontSize:W.Z.FontSize.normal,marginRight:4,fontFamily:W.Z.FontFamily.sansPro,fontWeight:"400",alignSelf:"center"},separator:{height:1},infoContainer:{flexDirection:"row",flex:.8},infoToggleContainer:{flex:.2,alignItems:"flex-end",alignSelf:"center"},tooltipActiveBgStyle:{backgroundColor:"#808080"+I.Z["20%"],borderRadius:14,padding:5},tooltipDefaultBgStyle:{padding:5}}),D=()=>{const{CreateComponent:e}=(0,p.ae)((e=>{var t,n;let l={};var o,r,a;return null!=e&&null!==(t=e.components)&&void 0!==t&&t.create&&"object"!=typeof(null==e||null===(n=e.components)||void 0===n?void 0:n.create)&&null!=e&&null!==(o=e.components)&&void 0!==o&&o.create&&(0,Z.Rp)(null==e||null===(r=e.components)||void 0===r?void 0:r.create)&&(l.CreateComponent=null==e||null===(a=e.components)||void 0===a?void 0:a.create),l})),{setStore:t}=((0,h.Z)(),(0,l.useContext)(w.ZP)),{setGlobalErrorMessage:n}=(0,l.useContext)(u.w5),s=(0,c.k6)(),[y,W]=(0,l.useState)(!1),[I,D]=(0,l.useState)(""),[G,j]=(0,l.useState)(!1),[X,_]=(0,l.useState)(!1),[H,U]=(0,l.useState)(!1),J=(0,v.Z)(),{data:q}=(0,F.xS)(),{setRoomInfo:K}=(0,z.P)(),V=(0,f.ZW)("loadingText")(),$=(0,f.ZW)(N.CS)({audioRoom:!1,eventMode:!1}),Q=(0,f.ZW)(N.mB)({audioRoom:!1,eventMode:!1}),Y=(0,f.ZW)(N.Fm)(),ee=(0,f.ZW)(N.XW)(),te=(0,f.ZW)(N.cy)(),ne=((0,f.ZW)(N.fH)(),(0,f.ZW)(N.Zf)(),(0,f.ZW)(N.dn)({audioRoom:!1,eventMode:!1})),le=(0,f.ZW)(N.X$)(),oe=(0,f.ZW)(N.pc),re=(0,f.ZW)(N.hI)(),ae=(0,f.ZW)(N.ZR)(),ie=(0,f.ZW)(N.ri)(),se=!(0,Z.XW)();(0,l.useEffect)((()=>{var e,t,n,l,o,r,a;q&&null!=q&&q.pstn&&null!=q&&null!==(e=q.pstn)&&void 0!==e&&e.error&&(d.Z.show({leadingIconName:"alert",type:"error",text1:"Failed to enable PSTN Service",text2:null==q||null===(t=q.pstn)||void 0===t||null===(n=t.error)||void 0===n?void 0:n.message,visibilityTime:1e4,primaryBtn:null,secondaryBtn:null,leadingIcon:null}),P.kg.error(P.O3.Internals,"CREATE_MEETING","PSTN Error",{message:null==q||null===(l=q.pstn)||void 0===l||null===(o=l.error)||void 0===o?void 0:o.message,code:null==q||null===(r=q.pstn)||void 0===r||null===(a=r.error)||void 0===a?void 0:a.code}))}),[q]),(0,l.useEffect)((()=>(P.kg.log(P.O3.Internals,"CREATE_MEETING","User has landed on create room"),(0,Z.lv)()&&!M.Z&&(document.title="otpuskaet"),console.log("[SDKEvents] Join listener registered"),()=>{})),[]);const ce=()=>{U(!0)},me=async(e,t,l)=>{if(""!==e){P.kg.log(P.O3.Internals,"CREATE_MEETING","User wants to create room"),W(!0);try{K((e=>({...F.EM,loginToken:null==e?void 0:e.loginToken}))),await J(e,t,l),W(!1),d.Z.show({leadingIconName:"tick-fill",type:"success",text1:oe((0,Z.rd)(e)),text2:re,visibilityTime:3e3,primaryBtn:null,secondaryBtn:null,leadingIcon:null}),ce()}catch(e){const t=null==e?void 0:e.code;-1!==Z.kq.indexOf(t)&&(0,M.Z)()&&A.Z.emit("unauthorized",e),W(!1),P.kg.error(P.O3.Internals,"CREATE_MEETING","There was error while creating meeting",JSON.stringify(e||{})),n(ae||ie?{name:ae,message:ie}:e)}}};return l.createElement(S,{value:{showShareScreen:ce}},H?l.createElement(l.Fragment,null):e?l.createElement(e,null):l.createElement(r.Z,{style:O.root},(0,Z.XW)()?l.createElement(l.Fragment,null):l.createElement(L.Z,{containerStyle:{marginBottom:-100}}),l.createElement(a.Z,{contentContainerStyle:O.main},l.createElement(x.Z,null,l.createElement(r.Z,null,l.createElement(r.Z,{style:O.logoContainerStyle},l.createElement(E.Z,null),(0,Z.XW)()?l.createElement(L.Z,{containerStyle:{marginTop:0,marginRight:0}}):l.createElement(l.Fragment,null)),l.createElement(T.Z,{size:se?20:16}),l.createElement(i.Z,{style:O.heading},$),l.createElement(T.Z,{size:40}),l.createElement(C.Z,{maxLength:Z.A1,labelStyle:O.inputLabelStyle,label:Q,value:I,placeholder:Y,onChangeText:e=>D(e),onSubmitEditing:()=>{null!=I&&I.trim()&&me(null==I?void 0:I.trim(),G,!X)}}),l.createElement(T.Z,{size:40}),l.createElement(r.Z,{style:[O.toggleContainer,O.upper,O.lower]},l.createElement(r.Z,{style:O.infoContainer},l.createElement(i.Z,{numberOfLines:1,style:O.toggleLabel},ee),l.createElement(B.Z,{activeBgStyle:O.tooltipActiveBgStyle,defaultBgStyle:O.tooltipDefaultBgStyle,toolTipMessage:te,renderContent:(e,t)=>((e,t)=>l.createElement(o.Z,{onPress:()=>t(!0)},l.createElement(k.Z,{iconType:"plain",name:"info",iconSize:20,tintColor:e?"#FFFFFF":"#808080"})))(e,t)})),l.createElement(r.Z,{style:O.infoToggleContainer},l.createElement(b.Z,{disabled:!1,isEnabled:X,toggleSwitch:_}))),l.createElement(l.Fragment,null),l.createElement(T.Z,{size:se?60:125})),l.createElement(r.Z,{style:[O.btnContainer]},l.createElement(m.Z,{iconName:"video-plus",disabled:y||!(null!=I&&I.trim()),containerStyle:!se&&{width:"100%"},onPress:()=>{me(null==I?void 0:I.trim(),G,!X)},text:y?V:ne}),l.createElement(T.Z,{size:16}),l.createElement(R.Z,{text:le,onPress:()=>{P.kg.log(P.O3.Internals,"CREATE_MEETING","User is navigated to join-room from create-room with an option to join using meeting id"),s.push("/join")}}))))),H?l.createElement(g.ZP,null):l.createElement(l.Fragment,null))}}}]);